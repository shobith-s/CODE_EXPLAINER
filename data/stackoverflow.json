[{"tags": ["python", "qt", "pyside6"], "owner": {"reputation": 1, "user_id": 11653295, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_Xl1_hIuRw0/AAAAAAAAAAI/AAAAAAAAADg/GrKN-r77Y5o/photo.jpg?sz=256", "display_name": "Tim MacDonald", "link": "https://stackoverflow.com/users/11653295/tim-macdonald"}, "is_answered": false, "view_count": 5, "answer_count": 1, "score": 0, "last_activity_date": 1744221365, "creation_date": 1744221232, "question_id": 79565023, "link": "https://stackoverflow.com/questions/79565023/pyside6-comboboxreportselector-setcurrentindex-not-working-as-documented", "title": "Pyside6 comboBoxReportSelector.setCurrentIndex() not working as documented", "body": "<p>I am attempting to populate a Pyside6 combobox, then set the current index based on the contents of the combobox...</p>\n<pre><code>def populate_fields_from_args(self):\n       for available_report in self.available_reports:\n                  self.window.comboBoxReportSelector.addItem(available_report['report_name'])\n\n        selected_report_name = [report['report_name'] for report in self.available_reports if report['report_short_name'] == self.args.report][0]\n        report_index = self.window.comboBoxReportSelector.findText(str(selected_report_name))\n        self.window.comboBoxReportSelector.setCurrentIndex(report_index)\n</code></pre>\n<p>I am receiving the following error:</p>\n<pre><code>    self.window.comboBoxReportSelector.setCurrentIndex(report_index)\nTypeError: descriptor 'setCurrentIndex' for 'PySide6.QtWidgets.QComboBox' objects doesn't apply to a 'int' object\n</code></pre>\n<p>This makes no sense to me as I have reviewed the documentation for PySide6.QtWidgets.QComboBox.setCurrentIndex and it does indeed take an integer. Additionally I tried this with setCurrentText and received a similar error regarding using a 'str' object.</p>\n<p>To add insult to injury when I run this exact same code using the Pycharm debugger on MacOS it works, but not using the Pycharm debugger on Linux.</p>\n<p>Any thoughts would be appreciated.</p>\n"}, {"tags": ["python", "dll", "ctypes"], "owner": {"reputation": 1017, "user_id": 2894535, "user_type": "registered", "profile_image": "https://i.sstatic.net/b8afI.png?s=256", "display_name": "Dominik Kaszewski", "link": "https://stackoverflow.com/users/2894535/dominik-kaszewski"}, "is_answered": false, "view_count": 33, "answer_count": 1, "score": 0, "last_activity_date": 1744221338, "creation_date": 1744195924, "last_edit_date": 1744219420, "question_id": 79564149, "link": "https://stackoverflow.com/questions/79564149/automatically-encode-decode-ctypes-argument-and-return-value", "title": "Automatically encode/decode ctypes argument and return value", "body": "<p>I have a shared library exposing a function:</p>\n<pre class=\"lang-c prettyprint-override\"><code>const char* foo(const char* s);\n</code></pre>\n<p>To call it from Python using ctypes, I can do the following:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import ctypes\n\nfoo = ctypes.cdll.LoadLibrary('foo.so')\nfoo.foo.argtypes = [ctypes.c_char_p]\nfoo.foo.restype = ctypes.c_char_p\n\nprint(foo.foo('Hello World!'.encode('utf8')).decode('utf8'))\n</code></pre>\n<p>Is there a way to embed the <code>encode/decode('utf8')</code> inside the type itself? I want to do the following:</p>\n<pre class=\"lang-py prettyprint-override\"><code>foo.foo.argtypes = [c_utf8_p]\nfoo.foo.restype = c_utf8_p\n\nprint(foo.foo('Hello World!'))\n</code></pre>\n<p>I was able to handle the <code>argtypes</code> with following:</p>\n<pre class=\"lang-py prettyprint-override\"><code>class c_utf8_p:\n    @classmethod\n    def from_param(cls, obj: str):\n        return obj.encode('utf8')\n</code></pre>\n<p>But cannot figure out the return type. <code>restype</code> docs say assigning it to anything that is not a <code>ctypes</code> type is deprecated, plus truncates value to <code>int</code> which destroys 64-bit pointers. I would like to avoid using <code>errcheck</code> since logically I am not checking any errors, plus it would require setting two attributes for every function.</p>\n"}, {"tags": ["python", "scikit-learn", "random-forest"], "owner": {"reputation": 985, "user_id": 4821654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/425303ad763e8c2f7186c3bf739dc97e?s=256&d=identicon&r=PG&f=y&so-version=2", "display_name": "nilkn", "link": "https://stackoverflow.com/users/4821654/nilkn"}, "is_answered": true, "view_count": 239040, "accepted_answer_id": 30443504, "answer_count": 9, "score": 94, "last_activity_date": 1744221159, "creation_date": 1432245075, "question_id": 30384995, "link": "https://stackoverflow.com/questions/30384995/randomforestclassfier-fit-valueerror-could-not-convert-string-to-float", "title": "RandomForestClassfier.fit(): ValueError: could not convert string to float", "body": "<p>Given is a simple CSV file:</p>\n\n<pre><code>A,B,C\nHello,Hi,0\nHola,Bueno,1\n</code></pre>\n\n<p>Obviously the real dataset is far more complex than this, but this one reproduces the error. I'm attempting to build a random forest classifier for it, like so:</p>\n\n<pre><code>cols = ['A','B','C']\ncol_types = {'A': str, 'B': str, 'C': int}\ntest = pd.read_csv('test.csv', dtype=col_types)\n\ntrain_y = test['C'] == 1\ntrain_x = test[cols]\n\nclf_rf = RandomForestClassifier(n_estimators=50)\nclf_rf.fit(train_x, train_y)\n</code></pre>\n\n<p>But I just get this traceback when invoking fit():</p>\n\n<pre><code>ValueError: could not convert string to float: 'Bueno'\n</code></pre>\n\n<p>scikit-learn version is 0.16.1.</p>\n"}, {"tags": ["python", "pymupdf"], "owner": {"reputation": 1, "user_id": 19154601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981c630286eaba16264176ac9eec2391?s=256&d=identicon&r=PG", "display_name": "tayun ", "link": "https://stackoverflow.com/users/19154601/tayun"}, "is_answered": false, "view_count": 17, "answer_count": 1, "score": 0, "last_activity_date": 1744220880, "creation_date": 1744219150, "question_id": 79564960, "link": "https://stackoverflow.com/questions/79564960/how-to-extract-unstructured-table-in-pdf-file-using-python", "title": "how to extract unstructured table in pdf file using python", "body": "<p>I try to extract table in pdf file in pymupdf with the following code</p>\n<p>for table in tables:\ndf = table.to_pandas()\nprint (df)</p>\n<p>The result look like this</p>\n<h2>Col0     | Col1         | Col2</h2>\n<p>function | % Time Spend | % Time Spend % Time Spend<br />\n| 1.5% 0.5     | 5% 0.4 0.6% 0.1</p>\n<p>How do I extract it correctly like this</p>\n<h2>Col0     | Col1   | Col2  | Col3   | Col4  | Col5   | Col6</h2>\n<p>function | % Time | Spend | % Time | Spend | % Time | Spend<br />\n| 1.5%   | 0.5   | 5%     | 0.4   | 0.6%   |b0.1</p>\n<p>thanks for your help</p>\n"}, {"tags": ["python", "c++", "or-tools", "cp-sat"], "owner": {"reputation": 1, "user_id": 16822208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a/AATXAJyOLQP97V_43u4RHETpXBX5fBLBF6xlgkkDQCnz=k-s256", "display_name": "Floris van der Hout", "link": "https://stackoverflow.com/users/16822208/floris-van-der-hout"}, "is_answered": false, "view_count": 12, "answer_count": 0, "score": 0, "last_activity_date": 1744220775, "creation_date": 1744220775, "question_id": 79565010, "link": "https://stackoverflow.com/questions/79565010/or-tools-cp-sat-python-implementation-way-faster-than-c", "title": "OR-tools (CP-SAT), Python implementation way faster than c++", "body": "<p>I was working on solving the Minimum Dominating Set problem using CP_SAT, and I initially implemented it in Python. The Python version was very fast, so I decided to incorporate it into my main C++ project. However, when I modeled it exactly the same way in C++, it turned out to be 10,000 times slower.</p>\n<p>Python:</p>\n<pre><code># create decision variables.\n    nodes = [model.new_int_var(0, 1, f&quot;node_{i + 1}&quot;) for i in range(num_vertices) if (included[i] == 0 and excluded[i] == 0 and removed[i] == 0)]\n\n    # create constraints.\n    for i in range(num_vertices):\n        if included[i] == 1 or dominated[i] == 1 or ignored[i] == 1:\n            continue\n        neighbors = adjacencyList[i]\n        undetermined_neighbors = [j for j in neighbors if (included[j] == 0 and excluded[j] == 0 and removed[j] == 0)]\n        if excluded[i] == 0 and removed[i] == 0:\n            model.Add(sum(nodes[translation_pace_to_ilp[j]] for j in undetermined_neighbors) + nodes[translation_pace_to_ilp[i]] &gt;= 1)\n        else:\n            model.Add(sum(nodes[translation_pace_to_ilp[j]] for j in undetermined_neighbors) &gt;= 1)\n\n    model.minimize(sum(nodes))\n</code></pre>\n<p>c++:</p>\n<pre><code>int index = 0;\n    for (int i = 0; i &lt; boost::num_vertices(graph); ++i)\n    {\n        if (mds_context.is_undetermined(newToOldIndex[i])){\n            decision_vars.push_back(cp_model.NewIntVar(domain).WithName(std::to_string(i)));\n}\n//Create constraint.\n    for (int i = 0; i &lt; boost::num_vertices(graph); i++) {\n        if (mds_context.is_dominated(newToOldIndex[i]) || mds_context.is_ignored(newToOldIndex[i])){\n            continue;\n        }\n        auto [neigh_itt, neigh_itt_end] = boost::adjacent_vertices(i, graph);\n        std::vector&lt;int&gt; undetermined_neighbours;\n        undetermined_neighbours.reserve(std::distance(neigh_itt, neigh_itt_end));\n        for (auto vertex = neigh_itt ; vertex != neigh_itt_end; ++vertex) {\n            if (mds_context.is_undetermined(newToOldIndex[*vertex])){\n                undetermined_neighbours.push_back(*vertex);\n            }\n        }\n        LinearExpr sum;\n        if (mds_context.is_excluded(newToOldIndex[i])){\n            for (int j : undetermined_neighbours) {\n                sum += decision_vars[translation_pace_to_ilp[j]];\n            }\n            cp_model.AddGreaterOrEqual(sum, 1);\n        } else {\n            for (int j : undetermined_neighbours) {\n                sum += decision_vars[translation_pace_to_ilp[j]];\n            }\n            sum += decision_vars[translation_pace_to_ilp[i]];\n            cp_model.AddGreaterOrEqual(sum , 1);\n        }\n\n    }\n    LinearExpr sum;\n    for (auto decision_var : decision_vars) {\n        sum += decision_var;\n    }\n    cp_model.Minimize(sum);\n\nIs this cased by certain parameters? let me know :)\n</code></pre>\n<p>I looked at the forum, i tried different ways to model the variables ect.</p>\n"}, {"tags": ["python", "unit-testing", "fastapi", "python-unittest.mock"], "owner": {"reputation": 301, "user_id": 11233365, "user_type": "registered", "profile_image": "https://i.sstatic.net/EnEtX.jpg?s=256", "display_name": "TheEponymousProgrammer", "link": "https://stackoverflow.com/users/11233365/theeponymousprogrammer"}, "is_answered": false, "view_count": 5, "answer_count": 0, "score": 0, "last_activity_date": 1744220559, "creation_date": 1744220559, "question_id": 79565001, "link": "https://stackoverflow.com/questions/79565001/error-mocking-requests-get-and-extracting-urllib-parse-urlparse-results", "title": "Error mocking `requests.get()` and extracting `urllib.parse.urlparse()` results when testing a FastAPI endpoint", "body": "<p>I'm trying to write a unit test for a FastAPI endpoint, and I have been unable to mock a <code>requests.get()</code> call made within the function. Additionally, there is a <code>urlparse()</code> call within the endpoint whose value I would like to extract and verify.</p>\n<p>The original code looks like this, with names anonymised:</p>\n<pre class=\"lang-py prettyprint-override\"><code># my_pkg.api\n\nimport requests\nfrom fastpi import APIRouter\nfrom pydantic import BaseModel  # Pydantic &lt;2\nfrom urllib.parse import urlparse\n\nrouter = APIRouter()\n\nclass FileParams(BaseModel):\n    source_path: Path\n    destination_path: str\n    destination_dir: str = &quot;something&quot;\n\n\n@router.post(&quot;/names/{some_name}/ids/{some_id}/upload_file&quot;)\ndef upload_file(\n    some_name: str, some_id: int, file_params: FileParams\n):\n\n    # Load machine config and other needed properties\n    my_config: dict[str, Any] = requests.get(f&quot;some/url/to/get/a/dict&quot;).json()\n\n    # Return the rsync URL if set, otherwise assume you are syncing via server\n    rsync_url = urlparse(\n        str(my_config[&quot;rsync_url&quot;])\n        if my_config.get(&quot;rsync_url&quot;, &quot;&quot;)\n        else get_server_url()\n    )\n    rsync_module = my_config.get(&quot;rsync_module&quot;, &quot;data&quot;)\n    rsync_path = f&quot;{rsync_url.hostname}::{rsync_module}/path/to/file.txt&quot;\n\n    # Run rsync subprocess to transfer gain reference\n    ...\n</code></pre>\n<p>So far, I want to mock out <code>requests.get().json()</code> and use a mock dictionary that I make. I also want to read what value gets returned by <code>urlparse</code> in the endpoint I'm testing. This is my attempt so far, which hasn't worked:</p>\n<pre class=\"lang-py prettyprint-override\"><code># tests/test_api\n\nfrom typing import Optional\nfrom unittest.mock import Mock, patch\nfrom urllib.parse import urlparse\n\nfrom fastapi import FastAPI\nfrom fastapi.testclient import TestClient\nfrom pytest import mark\n\nfrom my_pkg.api import router\n\napp = FastAPI()\napp.include_router(router)\nclient = TestClient(app)\n\n\ntest_upload_file_params_matrix = (\n    # Rsync URL | Rsync module | Source directory |\n    (\n        &quot;http://1.1.1.1&quot;,  # When rsync_url is provided\n        &quot;data&quot;,\n        &quot;/c/ProgramData/Some Program/Some Files&quot;,\n    ),\n    (\n        &quot;&quot;,  # When rsync_url is blank\n        &quot;data&quot;,\n        &quot;/c/ProgramData/Some Program/Some Files&quot;,\n    ),\n    (\n        None,  # When rsync_url not provided\n        &quot;data&quot;,\n        &quot;/c/ProgramData/Some Program/Some Files&quot;,\n    ),\n)\n\n\n@mark.parametrize(&quot;test_params&quot;, test_upload_gain_reference_params_matrix)\n@patch(&quot;my_pkg.api.subprocess&quot;)\n@patch(&quot;my_pkg.api.urlparse&quot;, wraps=urlparse)\n@patch(&quot;my_pkg.api.get_server_url&quot;)\n@patch(&quot;my_pkg.api.requests&quot;)\ndef test_upload_file(\n    mock_request,\n    mock_get_server_url,\n    spy_parse,\n    mock_subprocess,\n    test_params: tuple[Optional[str], str, str],\n):\n\n    # Create a mock config based on the test params\n    rsync_url, rsync_module, source_dir = test_params\n    server_url = &quot;http://0.0.0.0:8000&quot;\n    mock_config = {\n        &quot;rsync_module&quot;: rsync_module,\n        &quot;source_directory&quot;: source_dir,\n    }\n    if rsync_url is not None:\n        mock_config[&quot;rsync_url&quot;] = rsync_url\n\n    # Assign expected values to the mock objects\n    mock_response = Mock()\n    mock_response.status_code = 200\n    mock_response.json.return_value = mock_config\n    mock_request.get.return_value = mock_response\n    mock_get_server_url.return_value = server_url\n    mock_subprocess.run.return_value = Mock(returncode=0)\n\n    # Construct payload and submit post request\n    payload = {\n        &quot;gain_path&quot;: f&quot;{source_dir}/file.txt&quot;,\n        &quot;destination_path&quot;: &quot;some/path/to/save/to&quot;,\n        &quot;destination_dir&quot;: &quot;processing&quot;,\n    }\n    response = client.post(\n        &quot;/names/hello/ids/1/upload_file&quot;, json=payload\n    )\n\n    # Check that the config request was called\n    mock_request.get.assert_called_once()\n\n    # If no rsync_url key is provided, or rsync_url key is empty,\n    # This should default to the Murfey URL\n    returned_urlparse = spy_parse.return_value\n    expected_urlparse = urlparse(server_url) if not rsync_url else urlparse(rsync_url)\n    assert expected_urlparse.scheme == returned_urlparse.scheme\n    assert expected_urlparse.netloc == returned_urlparse.netloc\n    assert expected_urlparse.path == returned_urlparse.path\n\n    # Check that the subprocess was run\n    mock_subprocess.run.assert_called_once()\n\n    # Check that the endpoint function ran through to completion successfully\n    assert response.status_code == 200\n    assert response.json() == {&quot;success&quot;: True}\n</code></pre>\n<p>I'm running into a couple of errors at the moment. The first one is that <code>requests.get()</code> doesn't get called. And the second one is that <code>spy_parse.return_value</code> is returning a <code>MagicMock</code> object instead of a <code>ParseResult</code> object.</p>\n<p>How can my code be adjusted to resolve these issues?</p>\n"}, {"tags": ["python", "json", "django"], "owner": {"reputation": 8197, "user_id": 478377, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/313886141349b56131bfdb5e133d81fe?s=256&d=identicon&r=PG", "display_name": "Sai Krishna", "link": "https://stackoverflow.com/users/478377/sai-krishna"}, "is_answered": true, "view_count": 874626, "protected_date": 1661976348, "accepted_answer_id": 15882054, "answer_count": 32, "score": 527, "last_activity_date": 1744220448, "creation_date": 1309849315, "last_edit_date": 1632078682, "question_id": 6578986, "link": "https://stackoverflow.com/questions/6578986/how-to-convert-json-data-into-a-python-object", "title": "How to convert JSON data into a Python object?", "body": "<p>I want to convert JSON data into a Python object.</p>\n<p>I receive JSON data objects from the Facebook API, which I want to store in my database.</p>\n<p>My current View in Django (Python) (<code>request.POST</code> contains the JSON):</p>\n<pre><code>response = request.POST\nuser = FbApiUser(user_id = response['id'])\nuser.name = response['name']\nuser.username = response['username']\nuser.save()\n</code></pre>\n<ul>\n<li>This works fine, but how do I handle complex JSON data objects?</li>\n<li>Wouldn't it be much better if I could somehow convert this JSON object into a Python object for easy use?</li>\n</ul>\n"}, {"tags": ["python", "pandas", "dataframe", "conditional-statements", "switch-statement"], "owner": {"reputation": 7430, "user_id": 2201603, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.sstatic.net/PDTrS.jpg?s=256", "display_name": "Dave", "link": "https://stackoverflow.com/users/2201603/dave"}, "is_answered": true, "view_count": 1389826, "protected_date": 1659017132, "accepted_answer_id": 26887820, "answer_count": 8, "score": 644, "last_activity_date": 1744220030, "creation_date": 1415794092, "last_edit_date": 1744218682, "question_id": 26886653, "link": "https://stackoverflow.com/questions/26886653/create-new-column-based-on-values-from-other-columns-apply-a-function-of-multi", "title": "Create new column based on values from other columns / apply a function of multiple columns, row-wise in Pandas", "body": "<p>I want to apply my custom function (it uses an if-else ladder) to these six columns (<code>ERI_Hispanic</code>, <code>ERI_AmerInd_AKNatv</code>, <code>ERI_Asian</code>, <code>ERI_Black_Afr.Amer</code>, <code>ERI_HI_PacIsl</code>, <code>ERI_White</code>) in each row of my dataframe.</p>\n<p>I've tried different methods from other questions but still can't seem to find the right answer for my problem.  The critical piece of this is that if the person is counted as Hispanic they can't be counted as anything else.  Even if they have a &quot;1&quot; in another ethnicity column they still are counted as Hispanic not two or more races.  Similarly, if the sum of all the ERI columns is greater than 1 they are counted as two or more races and can't be counted as a unique ethnicity(except for Hispanic).</p>\n<p>It's almost like doing a for loop through each row and if each record meets a criterion they are added to one list and eliminated from the original.</p>\n<p>From the dataframe below I need to calculate a new column based on the following spec in SQL:</p>\n<p><strong>CRITERIA</strong></p>\n<pre><code>IF [ERI_Hispanic] = 1 THEN RETURN \u201cHispanic\u201d\nELSE IF SUM([ERI_AmerInd_AKNatv] + [ERI_Asian] + [ERI_Black_Afr.Amer] + [ERI_HI_PacIsl] + [ERI_White]) &gt; 1 THEN RETURN \u201cTwo or More\u201d\nELSE IF [ERI_AmerInd_AKNatv] = 1 THEN RETURN \u201cA/I AK Native\u201d\nELSE IF [ERI_Asian] = 1 THEN RETURN \u201cAsian\u201d\nELSE IF [ERI_Black_Afr.Amer] = 1 THEN RETURN \u201cBlack/AA\u201d\nELSE IF [ERI_HI_PacIsl] = 1 THEN RETURN \u201cHaw/Pac Isl.\u201d\nELSE IF [ERI_White] = 1 THEN RETURN \u201cWhite\u201d\n</code></pre>\n<p>Comment: If the ERI Flag for Hispanic is True (1), the employee is classified as \u201cHispanic\u201d</p>\n<p>Comment: If more than 1 non-Hispanic ERI Flag is true, return \u201cTwo or More\u201d</p>\n<p><strong>DATAFRAME</strong></p>\n<pre><code>     lname          fname       rno_cd  eri_afr_amer    eri_asian   eri_hawaiian    eri_hispanic    eri_nat_amer    eri_white   rno_defined\n0    MOST           JEFF        E       0               0           0               0               0               1           White\n1    CRUISE         TOM         E       0               0           0               1               0               0           White\n2    DEPP           JOHNNY              0               0           0               0               0               1           Unknown\n3    DICAP          LEO                 0               0           0               0               0               1           Unknown\n4    BRANDO         MARLON      E       0               0           0               0               0               0           White\n5    HANKS          TOM         0                       0           0               0               0               1           Unknown\n6    DENIRO         ROBERT      E       0               1           0               0               0               1           White\n7    PACINO         AL          E       0               0           0               0               0               1           White\n8    WILLIAMS       ROBIN       E       0               0           1               0               0               0           White\n9    EASTWOOD       CLINT       E       0               0           0               0               0               1           White\n</code></pre>\n"}, {"tags": ["python", "cdo-climate"], "owner": {"reputation": 1, "user_id": 22781722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd7c5d08e0bbd21fe28c8d6049b640fd?s=256&d=identicon&r=PG&f=y&so-version=2", "display_name": "Sam", "link": "https://stackoverflow.com/users/22781722/sam"}, "is_answered": false, "view_count": 6, "answer_count": 0, "score": 0, "last_activity_date": 1744219879, "creation_date": 1744219879, "question_id": 79564981, "link": "https://stackoverflow.com/questions/79564981/climada-how-to-add-precipitation-and-storm-surge-to-hurricane-damage-functions", "title": "CLIMADA - how to add precipitation and storm surge to hurricane damage functions set", "body": "<p>Can anyone give some pointers on how to include precipitation and storm surge damage from a hurricane hazard? It seems like most tutorials are concerned with wind damage only.</p>\n"}, {"tags": ["python"], "owner": {"reputation": 1, "user_id": 22534652, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocIG0rgDhEhAkStoTqsFmvSW6Es-8mBowzybC8Ww1jZTEg=k-s256", "display_name": "\ub098\uc774\uc2b9\ubbfc", "link": "https://stackoverflow.com/users/22534652/%eb%82%98%ec%9d%b4%ec%8a%b9%eb%af%bc"}, "is_answered": false, "view_count": 23, "closed_date": 1744219752, "answer_count": 0, "score": -2, "last_activity_date": 1744219337, "creation_date": 1744219337, "question_id": 79564964, "link": "https://stackoverflow.com/questions/79564964/why-field-max0-5-does-not-work-and-field-5-works-well", "closed_reason": "Not suitable for this site", "title": "why field = max(0,5) does not work and field -= 5 works well?", "body": "<p>if i use &quot;hp = max(~ )&quot;\nprint hp result won't change at all</p>\n<p>if i use &quot;hp -= value&quot;\nprint hp result works fine</p>\n<p>Why?</p>\n<p>Stat.py</p>\n<pre><code>class Stat:\n    def __init__(self, hp=0, mp=0, dmg=0):\n    def __add__(self, other):\n    def damage(self, self_instance, value):\n        self_instance.base_stat.hp = max(0, self_instance.base_stat.hp - value)\n        self_instance.base_stat.hp -= value\n        print(f&quot; magic damage&quot;)\n        if self.hp &gt; 0:\n            return True\n        else:\n            return False\n</code></pre>\n<hr />\n<p>Full code\n<a href=\"https://github.com/smc9759/Assignment_OOP\" rel=\"nofollow noreferrer\">https://github.com/smc9759/Assignment_OOP</a></p>\n<p>Skill.py</p>\n<pre><code>from abc import ABC, abstractmethod\n\nclass Skill(ABC):\n    def __init__(self):\n    @abstractmethod\n    def use(self, caster, target):\n        pass\n\nclass Spark(Skill):\n    def __init__(self):\n    def use(self, caster, target):\n        skill_dmg = 60 + (caster.stat.dmg * 2) \n        target.stat.damage(target, skill_dmg)  \n\n</code></pre>\n<p>Character.py</p>\n<pre><code>class character(Player):\n    def __init__(self, name, role):\n        self.name = name\n        self.role = role \n        self.base_stat = role.base_stat.copy()\n    @property    \n    def stat(self):\n        return self.base_stat\n\n    def use_skill(self, target):\n        self.role.use_skill(self, target)\n\n    def show_status(self):\n        print(f&quot;Name : {self.name}\\n HP : {self.stat.hp}\\n MP : {self.stat.mp}&quot;)    \n</code></pre>\n<hr />\n<p>Role.py</p>\n<pre><code>class Role(ABC):\n    def __init__(self, base_stat=ROLE_STAT_CONFIG[&quot;Newbie&quot;], skill = None):\n        self.base_stat = base_stat   \n</code></pre>\n<hr />\n<p>main.py</p>\n<pre><code>warrior = character(&quot;MC_hammer&quot;, WARRIOR)\n\nmage = character(&quot;SpoonKiller&quot;, MAGE)\n\n\nmage.use_skill(warrior)\nwarrior.use_skill(mage)\n\nwarrior.show_status()\nmage.show_status()\n</code></pre>\n<p>i tried = max\ni expected changes to hp\nbut there was no change</p>\n"}]